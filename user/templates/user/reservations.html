{% extends 'base.html' %}

{% block content %}
  {% if car_reservations or hotel_reservations %}
    {% if hotel_reservations %}
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">Hotel</th>
            <th scope="col">Rooms</th>
            <th scope="col">Services</th>
            <th scope="col">Check in</th>
            <th scope="col">Check out</th>
            <th scope="col">Guest number</th>
            <th scope="col">Full price</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% for reservation in hotel_reservations %}
            <tr>
              <td>{{reservation.hotel}}</td>
              <td>
                {% for room in hotel_rooms %}
                  {% if room.hotel == reservation.hotel %}
                    Room no {{room.number}}<br>
                  {% endif %}
                {% endfor %}
              </td>
              <td>
                {% for service in hotel_services %}
                  {% if service.hotel == reservation.hotel %}
                    {{service.name}}<br>
                  {% endif %}
                {% endfor %}</td>
              <td>{{reservation.check_in|date:"M-d-Y"}}</td>
              <td>{{reservation.check_out|date:"M-d-Y" }}</td>
              <td>{{reservation.guest_number}}</td>
              <td>{{reservation.rooms_charge|add:reservation.services_charge}}</td>
              <!-- <td>
                {% if reservation.is_done and not reservation.is_rated %}
                  <a class="btn btn-default" href="{% url 'car:car_rate' reservation.id%}">rate</a>
                {% elif reservation.is_rated %}
                  rated
                {% elif reservation.can_be_closed%}
                  <a class="btn btn-default" href="{% url 'car:cancel_reservation' reservation.id%}">cancel</a>
                {% endif %}
              </td> -->
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
    {% if car_reservations %}
      CAR RESERVATIONS
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">Service</th>
            <th scope="col">Office</th>
            <th scope="col">Date</th>
            <th scope="col">Return office</th>
            <th scope="col">Return date</th>
            <th scope="col">Car</th>
            <th scope="col">Full price</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% for reservation in car_reservations %}
            <tr>
              <td>{{reservation.office1.service}}</td>
              <td>{{reservation.office1.name}}</td>
              <td>{{reservation.date1|date:"M-d-Y"}}</td>
              <td>{{reservation.office2.name}}</td>
              <td>{{reservation.date2|date:"M-d-Y" }}</td>
              <td>{{reservation.car.name}}</td>
              <td>{{reservation.price}}</td>
              <td>
                {% if reservation.is_done and not reservation.is_rated %}
                  <a class="btn btn-default" href="{% url 'car:car_rate' reservation.id%}">rate</a>
                {% elif reservation.is_rated %}
                  rated
                {% elif reservation.can_be_closed%}
                  <a class="btn btn-default" href="{% url 'car:cancel_reservation' reservation.id%}">cancel</a>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  {% else %}
    <p>You don't have reservations.</p>
  {% endif %}
{% endblock content %}